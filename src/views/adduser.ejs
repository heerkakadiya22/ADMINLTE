<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>AdminLTE | Edit Profile</title>
        <%- include('partials/head') %>

        <script src="/src/assets/jquery/jquery.js"></script>

        <style>
      .edit-profile-card {
        max-width: 700px;
        margin: 50px auto;
      }

      label.error {
        color: red;
        font-size: 14px;
        margin-top: -8px;
        display: block;
      }

      .profile-image-wrapper {
        position: relative;
        display: inline-block;
      }

      .profile-image-wrapper img {
        width: 120px;
        height: 120px;
        object-fit: cover;
        border-radius: 50%;
        border: 3px solid #007bff;
      }

      .profile-image-wrapper label {
        position: absolute;
        bottom: 0;
        right: 0;
        background-color: #007bff;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 2px solid #fff;
      }

      .profile-image-wrapper input[type="file"] {
        display: none;
      }
    </style>
    </head>

    <body class="hold-transition sidebar-mini layout-fixed">
        <div class="wrapper">

            <%- include('partials/sidebar', { name: name, csrfToken: csrfToken
            }) %>

            <div class="content-wrapper">
                <section class="content-header">
                    <div class="container-fluid">
                        <div class="row mb-2">
                            <div class="col-sm-6">
                                <h1>Add User</h1>
                            </div>
                            <div class="col-sm-6">
                                <ol class="breadcrumb float-sm-right">
                                    <li class="breadcrumb-item"><a
                                            href="#">Home</a></li>
                                    <li class="breadcrumb-item active">Manage
                                        User</li>
                                    <li class="breadcrumb-item active">add
                                        User</li>
                                </ol>
                            </div>
                        </div>
                    </div><!-- /.container-fluid -->
                </section>
                <section class="content">
                    <div class="container-fluid">
                        <div class="row">

                            <div class="col-md-2"></div>
                            <!-- Profile Edit Form (Right) -->
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-body">
                                        <% if (typeof error !== 'undefined' &&
                                        error) { %>
                                        <div
                                            class="alert alert-danger alert-dismissible fade show"
                                            role="alert">
                                            <%= error %>
                                            <button type="button" class="close"
                                                data-dismiss="alert"
                                                aria-label="Close">
                                                <span
                                                    aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <% } %>

                                        <% if (typeof success !== 'undefined' &&
                                        success) { %>
                                        <div
                                            class="alert alert-success alert-dismissible fade show"
                                            role="alert">
                                            <%= success %>
                                            <button type="button" class="close"
                                                data-dismiss="alert"
                                                aria-label="Close">
                                                <span
                                                    aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <% } %>

                                        <div id="clientError"></div>

                                        <form action="/adduser" method="POST"
                                            enctype="multipart/form-data"
                                            id="adduser">

                                            <div class="text-center mb-4">
                                                <div
                                                    class="profile-image-wrapper">
                                                    <img
                                                        src="/src/assets/image/uploads/profile-user.png"
                                                        alt="User Avatar"
                                                        id="previewImg" />
                                                    <label for="imageUpload">
                                                        <i
                                                            class="fas fa-camera text-white"></i>
                                                    </label>
                                                    <input type="file"
                                                        id="imageUpload"
                                                        name="image"
                                                        accept="image/*" />
                                                </div>
                                            </div>

                                            <!-- Name -->
                                            <div class="form-group">
                                                <label>Full Name</label>
                                                <input type="text"
                                                    class="form-control"
                                                    name="name"
                                                    placeholder="Full Name" />
                                            </div>

                                            <!-- Email & Phone -->
                                            <div class="form-row">
                                                <div
                                                    class="form-group col-md-6">
                                                    <label>Email</label>
                                                    <input type="email"
                                                        class="form-control"
                                                        name="email"
                                                        placeholder="Email" />
                                                </div>
                                                <div
                                                    class="form-group col-md-6">
                                                    <label>Phone Number</label>
                                                    <input type="text"
                                                        class="form-control"
                                                        name="phone"
                                                        placeholder="Phone Number" />
                                                </div>
                                            </div>

                                            <!-- Username -->
                                            <div class="form-group">
                                                <label>Username</label>
                                                <input type="text"
                                                    class="form-control"
                                                    name="username"
                                                    placeholder="Username" />
                                            </div>

                                            <!-- Address -->
                                            <div class="form-group">
                                                <label>Address</label>
                                                <textarea name="address"
                                                    class="form-control"
                                                    placeholder="Address"></textarea>
                                            </div>

                                            <!-- DOB & Gender -->
                                            <div class="form-row">
                                                <div
                                                    class="form-group col-md-6">
                                                    <label>Date of Birth</label>
                                                    <input type="date"
                                                        class="form-control"
                                                        name="dob"
                                                        placeholder="Date of Birth" />
                                                </div>
                                                <div
                                                    class="form-group col-md-6">
                                                    <label>Gender</label><br />
                                                    <div
                                                        class="form-check form-check-inline">
                                                        <input
                                                            class="form-check-input"
                                                            type="radio"
                                                            name="gender"
                                                            value="Male" />
                                                        <label
                                                            class="form-check-label">Male</label>
                                                    </div>
                                                    <div
                                                        class="form-check form-check-inline">
                                                        <input
                                                            class="form-check-input"
                                                            type="radio"
                                                            name="gender"
                                                            value="Female" />
                                                        <label
                                                            class="form-check-label">Female</label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Hobby -->
                                            <div class="form-group">
                                                <label>Hobby</label>
                                                <select class="form-control"
                                                    name="hobby">
                                                    <option value>-- Select
                                                        Hobby --</option>
                                                    <option>Singing</option>
                                                    <option>Dancing</option>
                                                    <option>Travelling</option>
                                                    <option>Drawing</option>
                                                    <option>Cooking</option>
                                                    <option>Reading</option>
                                                    <option>Photography</option>
                                                    <option>Gaming</option>
                                                    <option>Sports</option>
                                                    <option>Coding</option>
                                                    <option>Other</option>
                                                </select>
                                            </div>

                                            <div class="form-row">
                                                <div
                                                    class="form-group col-md-6">
                                                    <label>Password</label>
                                                    <input type="password"
                                                        name="password"
                                                        class="form-control"
                                                        placeholder="password" />
                                                </div>

                                                <div
                                                    class="form-group col-md-6">
                                                    <label>Confirm
                                                        Password</label>
                                                    <input type="password"
                                                        name="confirm_password"
                                                        class="form-control"
                                                        placeholder="confirm password" />
                                                </div>
                                            </div>

                                            <!-- Submit -->
                                            <div
                                                class="form-group text-center mt-4">
                                                <button type="submit"
                                                    class="btn btn-success btn-lg w-100">Save
                                                    Changes</button>
                                            </div>
                                        </form>

                                        <div class="text-center mt-2">
                                            <a href="/manageuser"
                                                class="text-muted">← Go Back
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <%- include('partials/scripts') %>

        <!-- JS to preview selected image -->
        <script>
      document.getElementById("imageUpload").addEventListener("change", function (e) {
        const img = document.getElementById("previewImg");
        if (e.target.files && e.target.files[0]) {
          img.src = URL.createObjectURL(e.target.files[0]);
        }
      });
    </script>
    </body>
</html>
